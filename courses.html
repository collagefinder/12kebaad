<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Colleges — 12kebaad</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="Favicon.PNG" type="image/png">
</head>
<body>
  <header class="site-header small">
    <div class="container">
      <h1 class="brand">12kebaad</h1>
      <p class="tagline">Helping you choose your future</p>
    </div>
  </header>

  <main class="main container">
    <h2 id="title">Colleges</h2>
    <div id="tableWrap">Loading...</div>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>© 2025 12kebaad | Contact: 12kebaad.team@gmail.com</p>
    </div>
  </footer>

<script>
async function loadTable(){
  const state = localStorage.getItem('state') || 'All India';
  const stream = localStorage.getItem('stream') || '';
  document.getElementById('title').textContent = `Colleges for ${stream || 'All Streams'} in ${state}`;
  const res = await fetch('data/colleges_allindia.csv');
  const txt = await res.text();
  const rows = txt.split('\\n').slice(1);
  const filtered = [];
  rows.forEach(r => {
    if(!r.trim()) return;
    // split CSV row safely (this CSV uses no extra commas in fields)
    const cols = r.split(',');
    const name = cols[0] || '';
    const st = cols[1] || '';
    const strm = cols[2] || '';
    const typ = cols[3] || '';
    const fees = cols[4] || '';
    const loc = cols[5] || '';
    const cutoff = cols[6] || '';
    const adm = cols[7] || '';
    if((state === 'All India' || st.trim() === state.trim()) && (stream === '' || strm.toLowerCase().includes(stream.toLowerCase()))) {
      filtered.push({name,st,strm,typ,fees,loc,cutoff,adm});
    }
  });
  if(filtered.length === 0) {
    document.getElementById('tableWrap').innerHTML = '<p>No colleges found for your selection.</p>';
    return;
  }
  let html = '<table class="college-table"><thead><tr><th>Name</th><th>State</th><th>Stream</th><th>Type</th><th>Fees</th><th>Location</th><th>Cutoff%</th><th>Admission</th></tr></thead><tbody>';
  filtered.forEach(c => {
    html += `<tr><td>${c.name}</td><td>${c.st}</td><td>${c.strm}</td><td>${c.typ}</td><td>${c.fees}</td><td>${c.loc}</td><td>${c.cutoff}</td><td>${c.adm}</td></tr>`;
  });
  html += '</tbody></table>';
  document.getElementById('tableWrap').innerHTML = html;
}
loadTable();
</script>
</body>
</html></html></html></html></html></html>